# Source: https://github.com/twiecki/covid19

import numpy as np
import pandas as pf
import covidfuncs.datfuncs as cvdf
import covidfuncs.dffuncs as cvdff

def plot_countries(covid_df,
                   countries,
                   min_confirmed=100,
                   ls="--",
                   marker="o",
                   legendlabel="",
                   same_start=False,
                   ax=None):
    for country in countries:
        df_country = covid_df[country]
        if not "x" in covid_df.columns:
            cvdf.add_x(covid_df)
        df_country.index = covid_df["x"]
        df_country = df_country[df_country > min_confirmed]
        if len(df_country) == 0:
            continue
        if same_start:
            df_country.index = np.arange(len(df_country))
        if not ax:
            df_country.plot(ls=ls, marker=marker, label=country + legendlabel)
        else:
            df_country.plot(ls=ls, marker=marker, label=country + legendlabel, ax=ax)
        covid_df[country].index = covid_df.index


# Idea for this plot from minute physics
def plot_casecase(covid_df,
                   countries,
                   min_confirmed=100,
                   ls="--",
                   marker="o",
                   legendlabel="",
                   ax=None):
    for country in countries:
        if not country+" Diff" in covid_df.columns:
            cvdff.add_diff(covid_df, country)
        df_country = covid_df[country+" Diff"]
        df_country.index = covid_df[country]
        df_country = df_country[df_country.index > min_confirmed]
        if len(df_country) == 0:
            continue
        if not ax:
            df_country.plot(ls=ls, marker=marker, label=country + legendlabel)
        else:
            df_country.plot(ls=ls, marker=marker, label=country + legendlabel, ax=ax)
        covid_df[country+" Diff"].index = covid_df.index
